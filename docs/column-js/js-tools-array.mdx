---
title: JS å·¥å…·å‡½æ•° - Array ç¯‡
id: js-tools-array
sidebar_position: 1
toc_max_heading_level: 4
---

```mdx-code-block
import { Image } from '@arco-design/web-react';
```

> æœ¬ç« èŠ‚è®°å½• JavaScript Array ç›¸å…³çš„ä¸€äº›å·¥å…·å‡½æ•°ï¼ŒåŒ…æ‹¬æ•°ç»„çš„å»é‡ï¼Œåˆ†ç»„ï¼Œè¿‡æ»¤ç­‰æ–¹æ³•

<img src={require('./img/js-tools-array/wallhaven.png').default} style={{ maxHeight: 360 }} />

## å–å€¼ & ç»Ÿè®¡

### è·å–éšæœºä¸€é¡¹å…ƒç´ 

è·å–æ™®é€šæ•°ç»„ä¸­çš„éšæœºä¸€é¡¹å…ƒç´ :

```tsx title="ä»£ç å®ç°"
export const _randomArr = (arr: (string | number | boolean)[]) => {
  const len = arr.length;
  return arr[Math.floor(Math.random() * len)];
};
```

### ç»Ÿè®¡å…ƒç´ å‡ºç°çš„æ¬¡æ•°

ç»Ÿè®¡ä¸€ä¸ªå…ƒç´ åœ¨æ™®é€šæ•°ç»„ä¸­å‡ºç°çš„æ¬¡æ•°ï¼Œè¿”å›ä¸€ä¸ªå¯¹è±¡é›†åˆ:

```tsx title="ä»£ç å®ç°"
export const _totalObj = (arr: (string | number)[]) => {
  return arr.reduce((pre, next) => {
    if (pre[next]) {
      pre[next]++;
    } else {
      pre[next] = 1;
    }
    return pre;
  }, {});
};
```

ç¤ºä¾‹:

```jsx live
function ExampleComponent(props) {
  const array = ['æ™®å´ä¿¡ ğŸ¤–', 'æ™®å´ä¿¡ ğŸ¤–', 'sunny ğŸŒ', 'æ™®å´ä¿¡ ğŸ¤–', 'sunny ğŸŒ', 'dino ğŸ¦–'];

  const [value, setValue] = useState({});

  return <ResultButton results={value} onClick={() => setValue(_totalObj(array))} />;
}
```

## è¿‡æ»¤

### æ•°ç»„æ ¹æ®æŒ‡å®šå€¼è¿›è¡Œè¿‡æ»¤

å¯¹è±¡æ•°ç»„æ ¹æ®å¦ä¸€ä¸ªæ•°ç»„ä¸­çš„å€¼è¿›è¡ŒåŒ¹é…å¹¶è¿‡æ»¤ï¼Œåªä¿ç•™æ²¡æœ‰åŒ¹é…åˆ°çš„æ•°æ®;

```jsx title="ä»£ç å®ç°"
export const _dataFilter = (arr: any[], codeList: string[]) => {
  return arr.filter((item) => !codeList.includes(item?.code));
};
```

ç¤ºä¾‹:

```jsx live
function ExampleComponent(props) {
  const array = [
    { name: 'å¾®ä¿¡', code: 'whect' },
    { name: 'BOSSç›´è˜', code: 'boss' },
    { name: 'é’‰é’‰', code: 'dingtalk' },
    { name: 'äº¬ä¸œé‡‘è', code: 'jingdong' },
  ];
  const codeList = [
    { name: 'BOSSç›´è˜', code: 'boss' },
    { name: 'äº¬ä¸œé‡‘è', code: 'jingdong' },
  ];

  const [value, setValue] = useState();
  const codeMap = codeList.map((item) => item.code);

  return <ResultButton results={value} onClick={() => setValue(_dataFilter(array, codeMap))} />;
}
```

## å»é‡

### æ™®é€šæ•°ç»„çš„å»é‡

```jsx title="ä»£ç å®ç° - å£¹ ğŸ"
// ä½¿ç”¨ new Set() + è§£æ„ çš„æ–¹å¼è¿›è¡Œå»é‡
export const _unique = (arr: any[]) => {
  return [...new Set(arr)];
  // or
  return Array.from(new Set(arr));
};
```

```jsx title="ä»£ç å®ç° - è´° ğŸ"
// ä½¿ç”¨ new Map() + Array.filter çš„æ–¹æ³•ï¼Œåˆ©ç”¨ Map() çš„é”®å€¼å¯¹å…·æœ‰å”¯ä¸€æ€§çš„ç‰¹ç‚¹è¿›è¡Œå»é‡
export const _unique = (arr: any[]) => {
  const map = new Map();
  return arr.filter((item) => !map.has(item) && map.set(item, true));
};
```

```jsx title="ä»£ç å®ç° - å"
// ä½¿ç”¨ Array.includes æˆ– Array.indexof çš„æ–¹å¼è¿›è¡Œå»é‡
export const _unique = (arr: any[]) => {
  const newArray = [];
  arr.forEach((item) => {
    if (!newArray.includes(item)) newArray.push(item);
    // or
    if (newArray.indexOf(item) === -1) newArray.push(item); // ğŸ“¢ è¯¥æ–¹æ³•å¯¹å»é‡ NaN æ— æ•ˆï¼Œå› ä¸º [NaN].indexOf(NaN) === -1
  });
  return newArray;
};
```

```jsx title="ä»£ç å®ç° - è‚†"
// ä½¿ç”¨ Array.filter + Array.indexOf çš„æ–¹å¼è¿›è¡Œå»é‡ï¼ŒåŸç†ä¸º indexOf è¿”å›çš„ç»“æœæ˜¯è¯¥å…ƒç´ (ç¬¬ä¸€ä¸ª)åœ¨æ•°ç»„ä¸­çš„ç´¢å¼•
export const _unique = (arr: any[]) => {
  return arr.filter((item, index) => arr.indexOf(item) === index); // ğŸ“¢ è¯¥æ–¹æ³•ä¼šå°†æ‰€æœ‰çš„ NaN éƒ½è¿‡æ»¤æ‰
};
```

```jsx title="ä»£ç å®ç° - ä¼"
// ä½¿ç”¨ Array.filter + Object.hasOwnProperty çš„æ–¹å¼è¿›è¡Œå»é‡ï¼ŒåŸç†ä¸ºå¯¹è±¡çš„é”®å€¼å¯¹ä¸å¯é‡å¤
export const _unique = (arr: any[]) => {
  // ğŸ“¢ Object.hasOwnProperty() æ–¹æ³•è¿”å›ä¸€ä¸ª booleanï¼Œç”¨æ¥æŸ¥æ‰¾è¯¥å¯¹è±¡ä¸­æ˜¯å¦å­˜åœ¨æŸæŒ‡å®šå±æ€§
  const map = {};
  return arr.filter((item) =>
    map.hasOwnProperty(typeof item + item) ? false : (map[typeof item + item] = true)
  );
};
```

```jsx title="ä»£ç å®ç° - é™† ğŸ"
// ä½¿ç”¨ Array.reduce + Array.includes çš„æ–¹å¼è¿›è¡Œå»é‡
export const _unique = (arr: any[]) => {
  return arr.reduce((prev, cur) => {
    return prev.includes(cur) ? prev : prev.concat(cur); // concat æ‹¼æ¥
    // or
    return prev.includes(cur) ? prev : [...prev, cur]; // è§£æ„ æ‹¼æ¥
  }, []);
};
```

```jsx title="ä»£ç å®ç° - æŸ’"
// ä½¿ç”¨ Array.sort æ’åºçš„æ–¹æ³•ï¼ŒåŸç†æ˜¯å°†æ•°ç»„ä¸­é‡å¤çš„å…ƒç´ æ’åˆ—åœ¨ä¸€èµ·ï¼Œå†è¿›è¡Œå»é‡
export const _unique = (arr: any[]) => {
  const newArray = [];
  arr.sort().forEach((item) => {
    if (item !== newArray[newArray.length - 1]) newArray.push(item); // ğŸ“¢ è¯¥æ–¹æ³•å¯¹å»é‡ NaN æ— æ•ˆï¼Œå› ä¸º NaN !== NaN
  });
  return newArray;
};
```

ç¤ºä¾‹:

```jsx live
function ExampleComponent(props) {
  const array = [25, 'ğŸ˜„', 25, 'ğŸ˜„', null, NaN, null, NaN, '2022-02-25', '2022-02-25', 'China ğŸ‡¨ğŸ‡³'];

  const [value, setValue] = useState();

  return <ResultButton results={value} onClick={() => setValue(_unique(array))} />;
}
```

### å¯¹è±¡æ•°ç»„çš„å»é‡

```jsx title="ä»£ç å®ç° - å£¹"
// æ ¹æ®æŸå­—æ®µ(prop)ï¼Œä½¿ç”¨ æ™®é€šå¾ªç¯ çš„æ–¹å¼å»é‡
export const _uniqueObj = (arr: any[], prop: string) => {
  const obj = {};
  const result = [];
  arr.forEach((item) => {
    if (!obj[item[prop]]) {
      result.push(item);
      obj[item[prop]] = true;
    }
  });
  return result;
};
```

```jsx title="ä»£ç å®ç° - è´° ğŸ"
// æ ¹æ®æŸå­—æ®µ(prop)ï¼Œä½¿ç”¨ Array.reduce çš„æ–¹å¼å»é‡
export const _uniqueObj = (arr: any[], prop: string) => {
  const obj = {};
  return arr.reduce((prev, cur) => {
    obj[cur[prop]] ? '' : (obj[cur[prop]] = true && prev.push(cur));
    return prev;
  }, []);
};
```

```jsx title="ä»£ç å®ç° - å"
// æ ¹æ®æŸå­—æ®µ(prop)ï¼Œä½¿ç”¨ Array.filter + Array.findIndex çš„æ–¹å¼å»é‡
export const _uniqueObj = (arr: any[], prop: string) => {
  return arr.filter((item, index, self) => {
    return self.findIndex((el) => el[prop] === item[prop]) === index;
  });
};
```

ç¤ºä¾‹:

```jsx live
function ExampleComponent(props) {
  const array = [
    { area_id: '25', area_name: 'æ­¦æ±‰' },
    { area_id: '30', area_name: 'é•¿æ²™' },
    { area_id: '36', area_name: 'å—äº¬' },
    { area_id: '30', area_name: 'é•¿æ²™' },
    { area_id: '25', area_name: 'æ­¦æ±‰' },
  ];

  const [value, setValue] = useState();

  return <ResultButton results={value} onClick={() => setValue(_uniqueObj(array, 'area_id'))} />;
}
```

## åˆ†ç»„

### æ•°æ®çš„åˆ†ç»„(ä¸€å¯¹å¤š)

- æ ¹æ®æ•°æ®ä¸­çš„æŸå­—æ®µï¼Œå¯¹æ•°æ®è¿›è¡Œåˆ†ç»„ï¼Œå¤šæ¡æ•°æ®åªå¯¹åº”ä¸€ä¸ªåˆ†ç»„ï¼Œè¿”å›ä¸€ä¸ª **å¯¹è±¡**ï¼ŒåŒ **lodash** å·¥å…·åº“ä¸­çš„ `_groupBy` æ–¹æ³•;

```jsx title="ä»£ç å®ç° - å£¹"
// æ ¹æ®æŒ‡å®šå­—æ®µï¼Œä½¿ç”¨ æ™®é€šå¾ªç¯ çš„æ–¹å¼åˆ†ç»„ï¼Œè¿”å›ä¸€ä¸ªå¯¹è±¡
export const _groupByObj = (arr: any[], prop: string) => {
  const groups = {};
  arr.forEach((item) => {
    const value = item[prop];
    groups[value] = groups[value] || [];
    groups[value].push(item);
  });
  return groups;
};
```

```jsx title="ä»£ç å®ç° - è´° ğŸ"
// æ ¹æ®æŒ‡å®šå­—æ®µï¼Œä½¿ç”¨ Array.reduce çš„æ–¹å¼åˆ†ç»„ï¼Œè¿”å›ä¸€ä¸ªå¯¹è±¡
export const _groupByObj = (arr: any[], prop: string) => {
  return arr.reduce((prev, cur) => {
    (prev[cur[prop]] = prev[cur[prop]] || []).push(cur);
    return prev;
  }, {});
};
```

- æ ¹æ®æ•°æ®ä¸­çš„æŸå­—æ®µï¼Œå¯¹æ•°æ®è¿›è¡Œåˆ†ç»„ï¼Œå¤šæ¡æ•°æ®åªå¯¹åº”ä¸€ä¸ªåˆ†ç»„ï¼Œè¿”å›ä¸€ä¸ª **å¯¹è±¡æ•°ç»„**;

```jsx title="ä»£ç å®ç°"
// æ ¹æ®æŒ‡å®šå­—æ®µï¼Œä½¿ç”¨ æ™®é€šå¾ªç¯ çš„æ–¹å¼åˆ†ç»„ï¼Œè¿”å›ä¸€ä¸ªå¯¹è±¡æ•°ç»„
export const _groupByArray = (arr: any[]) => {
  const dest = [];
  const groups = {};
  arr.forEach((item) => {
    const { groupName, groupCode } = item;
    if (!groups[groupCode]) {
      groups[groupCode] = { groupName, groupCode, children: [] };
      dest.push(groups[groupCode]);
    }
    groups[groupCode].children.push(item);
  });
  return dest;
};
```

ç¤ºä¾‹:

```jsx live
function ExampleComponent(props) {
  const array = [
    { code: 'whect', name: 'å¾®ä¿¡', groupName: 'èŠå¤©è½¯ä»¶', groupCode: 'chat' },
    { code: 'dingding', name: 'é’‰é’‰', groupName: 'èŠå¤©è½¯ä»¶', groupCode: 'chat' },
    { code: 'majiang', name: 'æ¬¢ä¹éº»å°†', groupName: 'æ¸¸æˆ', groupCode: 'game' },
    { code: 'lolm', name: 'è‹±é›„è”ç›Ÿæ‰‹æ¸¸', groupName: 'æ¸¸æˆ', groupCode: 'game' },
    { code: 'qq', name: 'QQ ğŸ§', groupName: 'èŠå¤©è½¯ä»¶', groupCode: 'chat' },
    { code: 'taobao', name: 'æ·˜å®', groupName: 'è´­ç‰©', groupCode: 'shop' },
    { code: 'jingdong', name: 'äº¬ä¸œ', groupName: 'è´­ç‰©', groupCode: 'shop' },
  ];

  const [value, setValue] = useState();

  return (
    <ResultButton
      results={value}
      buttonGroup={[
        { text: 'æ˜¾ç¤ºç»“æœ(å¯¹è±¡)', onClick: () => setValue(_groupByObj(array, 'groupName')) },
        { text: 'æ˜¾ç¤ºç»“æœ(å¯¹è±¡æ•°ç»„)', onClick: () => setValue(_groupByArray(array)) },
      ]}
    />
  );
}
```

### æ•°æ®çš„åˆ†ç»„(å¤šå¯¹å¤š)

## æ‹·è´

## æ¯”å¯¹

## æ’åº

### å†’æ³¡æ’åº
