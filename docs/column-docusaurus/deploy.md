---
title: Docusaurus éƒ¨ç½²
sidebar_position: 5
toc_max_heading_level: 4
---

> æœ¬ç« èŠ‚å­¦ä¹ å¦‚ä½•åœ¨æœåŠ¡å™¨ä¸­éƒ¨ç½² Docusaurus & nginx ä»£ç†

## è…¾è®¯äº‘æœåŠ¡å™¨ & ç™»å½• ğŸ¸

### æœåŠ¡å™¨é¢æ¿

- è´­ä¹°å®ŒæœåŠ¡å™¨ä¹‹åï¼Œè¿›å…¥åˆ° _[è…¾è®¯äº‘æœåŠ¡å™¨ - æ§åˆ¶å°ä¸­å¿ƒ](https://console.cloud.tencent.com/lighthouse/instance/detail?rid=8&id=lhins-664fbkyy)_;
- æœåŠ¡å™¨å¯¹åº”çš„ `IPåœ°å€`: `81.70.239.170`(å…¬ç½‘);
- **é‡ç½®ç³»ç»Ÿå¯†ç **ï¼Œç”¨äºè¿œç¨‹ç™»å½• Linux ç³»ç»Ÿæˆ– Windows ç³»ç»Ÿ;

<img src={require('/img/docs/deploy/2022-01-17.jpg').default} alt="Example Image" />

- é‡ç½®å¯†ç æ—¶ï¼ŒLinux ç³»ç»Ÿé»˜è®¤ç”¨æˆ·åä¸º `root`ï¼›Windows ç³»ç»Ÿé»˜è®¤ç”¨æˆ·åä¸º `administrator`ï¼›å½“ç„¶éƒ½å¯ä»¥è‡ªå®šä¹‰ç”¨æˆ·å;
- æœåŠ¡å™¨ä¸­çš„ **ç³»ç»Ÿé•œåƒ** é»˜è®¤æ˜¯ **TencentOS Server**ï¼Œå®ƒæ˜¯ Linux æ“ä½œç³»ç»Ÿï¼Œå½“ç„¶ä¹Ÿå¯ä»¥é€‰æ‹©é‡è£…ç³»ç»Ÿé•œåƒï¼Œæ¯æ¬¡é‡è£…ä¹‹åéƒ½éœ€ **é‡ç½®å¯†ç **;
- æœåŠ¡å™¨ä¸­çš„ **åº”ç”¨é•œåƒ** é»˜è®¤æ˜¯ **å®å¡” Linux é¢æ¿**ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥é€‰æ‹©é‡è£…åº”ç”¨é•œåƒï¼Œæ¯æ¬¡é‡è£…ä¹‹åéƒ½éœ€ **é‡ç½®å¯†ç **;

### Linux ç³»ç»Ÿç›®å½•ç»“æ„

è®°å½•ä¸€ä¸‹ Linux ç³»ç»Ÿä¸­çš„å¸¸ç”¨åˆ°çš„ç›®å½•ç»“æ„(éƒ¨åˆ†);

```bash title="my-website"
â”œâ”€â”€ ğŸ“ /root
â”‚   â””â”€â”€ ğŸ“ etc      # è¯¥ç›®å½•ç”¨æ¥å­˜æ”¾ç³»ç»Ÿä¸­çš„æ‰€æœ‰é…ç½®æ–‡ä»¶ï¼Œä¸€èˆ¬éƒ½æ˜¯ä»¥ xxx.conf çš„å½¢å¼å‘½åï¼Œæ¯”å¦‚ nginx çš„é…ç½®é¡¹ä¹Ÿåœ¨è¯¥ç›®å½•ä¸‹
â”‚       â””â”€â”€ ğŸ“ nginx
â”‚           â””â”€â”€ ğŸ“ƒ conf.d      # nginx é…ç½®é¡¹æ–‡ä»¶
â”‚   â””â”€â”€ ğŸ“ home     # ä¸»ç›®å½•ï¼Œä¸€èˆ¬ç”¨æ¥æ”¾ç½®å‰ç«¯èµ„æº
â”‚       â””â”€â”€ ğŸ“ my-website
â”‚   â””â”€â”€ ğŸ“ bin     # å­˜æ”¾äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå¸¸ç”¨çš„å‘½ä»¤ä¸€èˆ¬éƒ½åœ¨è¿™é‡Œ
```

### ssh è¿œç¨‹ç™»å½•

- **Mac** ç”µè„‘ä¸Šä½¿ç”¨ **iTerm** å‘½ä»¤è¡Œå·¥å…·è¿›è¡Œç™»å½•;
- **Windows** ç”µè„‘ä¸Šå»ºè®®ä¸‹è½½ _[cmder](https://cmder.net/)_ å·¥å…·è¿›è¡Œç™»å½•;
- é€šè¿‡ `ssh [ç”¨æˆ·å]@[IPåœ°å€]` å‘½ä»¤è¿›è¡Œè¿œç¨‹ç™»å½•ï¼ˆéœ€è¾“å…¥å¯†ç ï¼‰:

```bash title="iTerm / cmder å·¥å…·"
# â˜˜ï¸ ç™»å½•
ssh root@81.70.239.170

# â˜˜ï¸ é€€å‡ºæœåŠ¡å™¨
exit
```

- ç™»å½•æˆåŠŸä¹‹åï¼Œåˆ‡æ¢åˆ°æœåŠ¡å™¨çš„æ ¹ç›®å½•ä¸‹ï¼Œæ‰¾åˆ° **/home** æ–‡ä»¶å¤¹ï¼Œè‡ªå®šä¹‰åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œç”¨æ¥æ”¾ç½®å‰ç«¯èµ„æºï¼ˆä¸ªäººæ“ä½œï¼‰:

```bash title="iTerm / cmder å·¥å…·"
cd /
cd home     # åˆ‡æ¢åˆ° /home æ–‡ä»¶å¤¹ä¸‹
pwd         # æŸ¥çœ‹è¯¥ç›®å½•çš„è·¯å¾„

ll          # æŸ¥çœ‹è¯¥æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰ç›®å½•ï¼ˆåŒ…å«è¯¦æƒ…ä¿¡æ¯ï¼‰
ls          # æŸ¥çœ‹è¯¥æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰ç›®å½•ï¼ˆåªæœ‰æ–‡ä»¶åï¼‰

mkdir my-website    # åˆ›å»ºæ–‡ä»¶å¤¹

rm -r [æ–‡ä»¶å¤¹]      # åˆ é™¤æ–‡ä»¶å¤¹ç›®å½•
```

## æœåŠ¡å™¨æ‰‹åŠ¨éƒ¨ç½² ğŸ¸

### å®‰è£… & å¯åŠ¨ nginx

- å®‰è£…å¹¶å¯åŠ¨ä¸€ä¸ªç®€å•çš„ **nginx**ï¼Œæµ‹è¯•æœåŠ¡å™¨ IP æ˜¯å¦å¯ä»¥æ­£å¸¸è®¿é—®;

```bash title="iTerm / cmder å·¥å…·"
# â˜˜ï¸ ä¸‹è½½å¹¶å®‰è£… nginx
yum install nginx -y

# æŸ¥çœ‹ nginx å½“å‰çš„ç‰ˆæœ¬ä¿¡æ¯ï¼Œæ£€æµ‹æ˜¯å¦å®‰è£…æˆåŠŸ
nginx -v     # ä»…æ˜¾ç¤ºç‰ˆæœ¬
nginx -V     # æ˜¾ç¤ºç‰ˆæœ¬ï¼Œç¼–è¯‘å™¨ç‰ˆæœ¬å’Œé…ç½®å‚æ•°ä¿¡æ¯

# â˜˜ï¸ å¯åŠ¨ nginx
nginx

# å¼ºåˆ¶(å¿«é€Ÿ)åœæ­¢ nginx æœåŠ¡
nginx -s stop

# â˜˜ï¸ ä¼˜é›…çš„åœæ­¢ nginx æœåŠ¡(ä¸€ä¸ªè¯·æ±‚è¢«å¤„ç†å®Œä¹‹åæ‰è¢«å…³é—­)
nginx -s quit

# é‡å¯ nginx
nginx -s reopen

# é‡æ–°åŠ è½½ nginx é…ç½®æ–‡ä»¶ï¼Œå¹¶ä¸”ä»¥ä¼˜é›…çš„æ–¹å¼é‡å¯ nginx
nginx -s reload
```

è®¿é—®æœåŠ¡å™¨ IPï¼Œå‡ºç°ä»¥ä¸‹é¡µé¢æ—¶ï¼Œè¡¨ç¤ºå¯ä»¥æ­£å¸¸è¿è¡Œ;

<img src={require('/img/docs/deploy/2022-01-17-nginx.jpg').default} alt="Example Image" />

### å‡†å¤‡å‰ç«¯æ‰“åŒ…åçš„èµ„æº

#### ä½¿ç”¨ git ä¸‹è½½çº¿ä¸Šèµ„æº

- åœ¨ Linux ç³»ç»Ÿä¸­å®‰è£… git å’Œ nodejs;

```bash title="iTerm / cmder å·¥å…·"
# â˜˜ï¸ å®‰è£… git
yum install git
git --version

# â˜˜ï¸ å®‰è£… nodejs
yum install nodejs -y
node -v
npm -v

# â˜˜ï¸ å®‰è£… npm æ·˜å®é•œåƒ cnpm
npm install -g cnpm --registry=https://registry.npm.taobao.org
cnpm -v
```

:::caution ç¦»è°±å°è´´å£«

- ç”±äº **yum** å®‰è£…çš„ nodejs ç‰ˆæœ¬å¤ªä½ï¼Œæ‰€ä»¥éœ€è¦æ‰‹åŠ¨é‡æ–°å®‰è£… nodejs;
- æ‰“å¼€ _[nodejs å®˜ç½‘](http://nodejs.cn/download/)_ï¼Œä¸‹è½½å®˜æ–¹ç¼–è¯‘å¥½çš„ Linux äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå¦‚å›¾;

<img src={require('/img/docs/deploy/2022-01-18.jpg').default} alt="Example Image" />

- ç‚¹å‡»å³é”® **å¤åˆ¶é“¾æ¥åœ°å€**ï¼Œç„¶åä½¿ç”¨ `wget` å’Œ `tar` å‘½ä»¤ä¸‹è½½å¹¶è§£å‹è¯¥æ–‡ä»¶;

```bash title="iTerm / cmder å·¥å…·"
# â˜˜ï¸ ä½¿ç”¨ yum å¸è½½åŸ nodejs åŒ…
yum remove nodejs

# æ–°å»ºä¸€ä¸ªç”¨æ¥å­˜æ”¾ä¸‹è½½èµ„æºçš„æ–‡ä»¶ç›®å½•(ä¸ªäººæ“ä½œ)
cd /
mkdir Downloads
cd Downloads

# â˜˜ï¸ ä¸‹è½½ nodejs å®˜æ–¹èµ„æºåŒ…
wget https://npmmirror.com/mirrors/node/v16.13.2/node-v16.13.2-linux-x64.tar.xz

# â˜˜ï¸ è§£å‹ nodejs èµ„æºåŒ…
xz -d node-v16.13.2-linux-x64.tar.xz     # è§£å‹ xz æ–‡ä»¶ï¼Œè§£å‹ä¹‹åä¼šåˆ é™¤å‹ç¼©åŒ…
tar -xvf node-v16.13.2-linux-x64.tar     # è§£å‹ tar æ–‡ä»¶ï¼Œ-xf: è§£å‹æ–‡ä»¶çš„æ ¸å¿ƒæŒ‡ä»¤; -v: è§£å‹æ—¶æ˜¾ç¤ºå‹ç¼©åŒ…é‡Œçš„æ–‡ä»¶å’Œè¯¦ç»†ä¿¡æ¯
```

- è§£å‹ä¹‹åçš„ nodejs èµ„æºæ˜¯ä¸€ä¸ªç‹¬ç«‹ç¨‹åºåŒ…ï¼Œæ”¾åˆ°ä»»æ„ä½ç½®éƒ½èƒ½æ‰§è¡Œï¼Œä½†ä¸ºäº†å…¨å±€ä½¿ç”¨ï¼Œè¿˜æ˜¯éœ€è¦é…ç½®ä¸€ä¸‹ **ç¯å¢ƒå˜é‡**;

```bash title="iTerm / cmder å·¥å…·"
# â˜˜ï¸ é…ç½®ç¯å¢ƒå˜é‡ï¼Œä½¿ç”¨ vim è¿›è¡Œç¼–è¾‘
vim /etc/profile       # è¿›å…¥åªè¯»æ¨¡å¼
i      # è¾“å…¥ i è¿›å…¥ç¼–è¾‘æ¨¡å¼

# â˜˜ï¸ åœ¨ profile æ–‡ä»¶çš„åº•éƒ¨æ·»åŠ ä»¥ä¸‹ä»£ç 
export NODE_HOME=/Downloads/node-v16.13.2-linux-x64
export PATH=$NODE_HOME/bin:$PATH

# â˜˜ï¸ ä¿å­˜å¹¶ç¦»å¼€ vi ç¼–è¾‘å™¨
ESC     # æŒ‰ ESC è¿”å›åªè¯»æ¨¡å¼
:wq     # ä¿å­˜å¹¶é€€å‡º
:q      # åœ¨æœªç¼–è¾‘çš„æƒ…å†µä¸‹ï¼Œç›´æ¥é€€å‡º
:q!     # åœ¨ç¼–è¾‘ä½†ä¸æƒ³ä¿å­˜çš„æƒ…å†µä¸‹ï¼Œå¼ºåˆ¶é€€å‡º

# â˜˜ï¸ åˆ·æ–° /etc/profile é…ç½®
source /etc/profile

# éªŒè¯ nodejs ç‰ˆæœ¬æ˜¯å¦æœ€æ–°
node -v
```

:::

- æœ€æ–°ç‰ˆæœ¬çš„ nodejs å®‰è£…å®Œæˆä¹‹åï¼Œå°†ä¸Šä¼ åˆ° GitHub / Gitee ä¸­çš„ç½‘ç«™é¡¹ç›® `clone` åˆ° **home** ç›®å½•ä¸­;
- è¿›å…¥åˆ° `clone` å¥½çš„é¡¹ç›®ï¼Œé€šè¿‡ `npm` å¯¹é¡¹ç›®è¿›è¡Œ **ä¾èµ–å®‰è£…** å’Œ **æ‰“åŒ…**;

```bash title="iTerm / cmder å·¥å…·"
# â˜˜ï¸ å°†é¡¹ç›®å…‹éš†åˆ° home ç›®å½•ä¸­
cd /home
git clone https://gitee.com/zhgt__xu/zhgt-shaozi.github.io.git
git pull origin main    # å¼ºåˆ¶æ‹‰å–çº¿ä¸Šæœ€æ–°ä»£ç 

# æ›´æ”¹æ–‡ä»¶ç›®å½•åç§°(ä¸ªäººæ“ä½œ)
mv zhgt-shaozi.github.io [æ–°æ–‡ä»¶ç›®å½•åç§°(github-project)]

# cd åˆ°é¡¹ç›®ç›®å½•ä¸‹ï¼Œè¿›è¡Œå®‰è£…è¿è¡Œ
cd github-project
cnpm install    # å®‰è£…é¡¹ç›®ä¾èµ–
npm run build   # é¡¹ç›®æ‰“åŒ…
```

:::caution ç¦»è°±å°è´´å£«

- æœ‰æ—¶å€™é¡¹ç›®åœ¨ **æ‰“åŒ…** æ—¶ï¼Œä¼šå› ä¸º **nodejs å†…å­˜æº¢å‡º** è€Œå¯¼è‡´é¡¹ç›®æ‰“åŒ…å¤±è´¥ï¼Œå¦‚å›¾:

<img src={require('/img/docs/deploy/2022-01-18-ITerm.jpg').default} alt="Example Image" />

- å°è¯•é€šè¿‡ `node --max-old-space-size=[å®¹é‡(MB)]` å‘½ä»¤æ¥ **æ‰©å¤§ nodejs å†…å­˜** ä»¥è§£å†³æ­¤é—®é¢˜ï¼Œå®¹é‡çš„å¯é€‰å€¼ä¸º `[4096, 6096, 8192, ...]`ï¼Œ å¯åœ¨é¡¹ç›®çš„ `package.json` æ–‡ä»¶çš„è„šæœ¬å‘½ä»¤ä¸­ä¿®æ”¹ä»¥ä¸‹ä»£ç :

```diff title="é¡¹ç›®/package.json"
{
    "scripts": {
        ...,
        "start": "docusaurus start",
-       "build": "docusaurus build",
+       "build": "node --max-old-space-size=8192 node_modules/@docusaurus/core/bin/docusaurus build",
        ...
    }
}
```

:::

- æ‰“å®ŒåŒ…ä¹‹å(é»˜è®¤æ˜¯ **/build** ç›®å½•)ï¼Œå°†èµ„æºç›®å½•å¤åˆ¶åˆ°ä¹‹å‰åˆ›å»ºå¥½çš„ **/home/my-website** ç›®å½•ä¸‹ï¼Œå†æ‰‹åŠ¨ _[é…ç½® nginx](#nginx-config)_ï¼Œæ”¾ç½®èµ„æºï¼Œå³å¯å®Œæˆéƒ¨ç½²;

```bash title="iTerm / cmder å·¥å…·"
# â˜˜ï¸ å¤åˆ¶ build ç›®å½•
cd /home
cp -a github-project/build my-website
```

#### ä½¿ç”¨ FTP ä¸Šä¼ æœ¬åœ°èµ„æº

### é…ç½® nginx {#nginx-config}

- æ‰¾åˆ° nginx çš„é…ç½®æ–‡ä»¶ï¼Œä½¿ç”¨ `vim` å¯¹å…¶è¿›è¡Œç¼–è¾‘ï¼Œå°†å·²æ”¾ç½®å¥½çš„ **å‰ç«¯èµ„æº** éƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸­ï¼Œæ“ä½œå¦‚ä¸‹:

```bash title="iTerm / cmder å·¥å…·"
# â˜˜ï¸ è¿›å…¥ nginx çš„é…ç½®æ–‡ä»¶
vim /etc/nginx/nginx.conf
i      # è¾“å…¥ i è¿›å…¥ç¼–è¾‘æ¨¡å¼
```

- éœ€è¦ä¿®æ”¹çš„é…ç½®é¡¹å¦‚ä¸‹:

```bash title="nginx.conf é…ç½®æ–‡ä»¶"
server {
    listen       80 default_server;     # ç›‘å¬çš„ç«¯å£å·ï¼Œé»˜è®¤ä¸º 80
    listen       [::]:80 default_server;
    server_name  _;     # ç½‘ç«™åŸŸå
    root         /home/my-website/build;    # å­˜æ”¾å‰ç«¯èµ„æºçš„ç›®å½•
    index        index.html;
}
```

## å‰ç«¯è‡ªåŠ¨åŒ–éƒ¨ç½² ğŸ¸

## ç›¸å…³é“¾æ¥ ğŸ”—

- [Linux å¸¸ç”¨å‘½ä»¤å­¦ä¹  - èœé¸Ÿæ•™ç¨‹](https://www.runoob.com/w3cnote/linux-common-command-2.html)
- [Linux vim ç¼–è¾‘çš„ä½¿ç”¨ - èœé¸Ÿæ•™ç¨‹](https://www.runoob.com/linux/linux-vim.html)
- [Linux yum å‘½ä»¤å­¦ä¹  - èœé¸Ÿæ•™ç¨‹](https://www.runoob.com/linux/linux-yum.html)
