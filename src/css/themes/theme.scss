/* [x] scss ä¸»é¢˜å‡½æ•°ï¼ˆæš‚æ—¶åºŸå¼ƒï¼Œç»Ÿä¸€é€šè¿‡ CSS å…¨å±€å˜é‡æ§åˆ¶ï¼‰ */
$theme-map: null; // å£°æ˜è¯¥å˜é‡æ‰å¯ä½¿ç”¨ !global

// $themes å˜é‡ç”¨æ¥å®šä¹‰å„ä¸»é¢˜ä¸‹çš„ key åŠå¯¹åº”çš„é¢œè‰²ï¼Œç”± map-get å‡½æ•°ä¼ æ¥çš„ key å»å¯¹åº”çš„æŸ¥æ‰¾
$themes: (
  light: (
    // #{'key'}: #{'value'},
    // ğŸŒ°
    background_color1: #fff,
  ),
  dark: (
    // #{'key'}: #{'value'},
    background_color1: #333,
  ),
);

@mixin themeify {
  @each $name, $map in $themes {
    // !global æŠŠå±€éƒ¨å˜é‡å¼ºå‡ä¸ºå…¨å±€å˜é‡
    $theme-map: $map !global; // å°†å„ä¸»é¢˜ä¸‹çš„ key åŠå¯¹åº”çš„å€¼æå‡ä¸ºå…¨å±€ï¼Œä¾¿äº map-get å‡½æ•°ä½¿ç”¨
    // & çˆ¶å®¹å™¨æ ‡è¯†ï¼ˆç±»åï¼‰
    // @content æ˜¯æ··åˆå™¨æ’æ§½ï¼Œåƒ vue çš„ slot
    [data-theme='#{$name}'] & {
      @content;
    }
  }
}

// map-get(map, key) å‡½æ•°ï¼Œä» map å¯¹è±¡ä¸­æ ¹æ® key è·å–å…¶å¯¹åº”çš„ value
@function themed($key) {
  @return map-get($theme-map, $key);
}

// èƒŒæ™¯é¢œè‰²
@mixin theme_bg_color($key) {
  @include themeify {
    background-color: themed($key); // å¯¹åº” @content
  }
}
// å­—ä½“é¢œè‰²
@mixin theme_font_color($key) {
  @include themeify {
    color: themed($key);
  }
}
// è¾¹æ¡†é¢œè‰²
@mixin theme_border_color($key) {
  @include themeify {
    border-color: themed($key);
  }
}
// ç›’é˜´å½±
@mixin theme_shadow_color($key) {
  @include themeify {
    box-shadow: themed($key);
  }
}

// ğŸŒ° ä½¿ç”¨æ–¹å¼ï¼Œç›´æ¥åœ¨ç±»ä¸­ä½¿ç”¨ï¼Œåªéœ€å®šä¹‰å„ä¸»é¢˜ä¸‹æ‰€éœ€è¦çš„ key å³å¯
.example {
  @include theme_bg_color('background_color1');
  // ...
}
